/**
 * Developed by Jesse Maxwell for BluegrassPiano.com.
 */var Navigation=function(){var e=this;e.navBar=document.getElementById("navigation");e.navElements=e.navBar.getElementsByTagName("li");e.pageContent=document.getElementById("page-content");e.everything=document.getElementById("nav-and-content");e.currentItem=document.getElementById("underline");e.docHeight=document.childNodes[1].scrollHeight-document.childNodes[1].clientHeight;e.windowHeight=document.childNodes[1].clientHeight;e.menuIcon=document.getElementById("toggle-menu");e.windowWidth=document.childNodes[1].clientWidth;e.hMove=50;e.vMove=30;e.resetTouch=function(){e.xCoords=[];e.yCoords=[]};e.openMenu=function(){var t=e.lastTouchPlace,n=setInterval(function(){e.animateOpening(t);t+=2;if(t>=Math.round(e.windowWidth*.8)){clearInterval(n);e.lastTouchPlace=0}},1);e.menuIsOpen=!0;e.pageContent.addEventListener("click",e.closeMenu);e.pageContent.removeEventListener("touchend",e.openMenu);e.resetTouch()};e.closeMenu=function(){var t=e.lastTouchPlace,n=setInterval(function(){e.animateClosing(t);t-=2;if(t<=0){clearInterval(n);e.lastTouchPlace=0;e.pageContent.style.left=0;e.menuIcon.style.left="10px"}},1);e.menuIsOpen=!1;e.pageContent.removeEventListener("touchend",e.closeMenu);e.resetTouch()};e.animateOpening=function(t){e.pageContent.style.left=t+2+"px";e.menuIcon.style.left=t+12+"px"};e.animateClosing=function(t){e.pageContent.style.left=t-2+"px";e.menuIcon.style.left=t-2+10+"px"};e.handleTouchMove=function(t){var n=t.changedTouches;e.xCoords[e.xCoords.length-1]!==n[0].clientX&&e.xCoords.push(n[0].clientX);e.yCoords[e.yCoords.length-1]!==n[0].clientY&&e.yCoords.push(n[0].clientY);if(e.xCoords[e.xCoords.length-1]>=e.xCoords[0]+e.hMove&&e.yCoords[e.yCoords.length-1]<=e.yCoords[0]+e.vMove&&e.yCoords[e.yCoords.length-1]>=e.yCoords[0]-e.vMove){e.pageContent.style.left=e.xCoords[e.xCoords.length-1]+"px";e.menuIcon.style.left=e.xCoords[e.xCoords.length-1]+10+"px";if(!e.menuIsOpen){e.pageContent.addEventListener("touchend",e.openMenu);e.lastTouchPlace=e.xCoords[e.xCoords.length-1]}}else if(e.xCoords[e.xCoords.length-1]<=e.xCoords[0]-e.hMove&&e.yCoords[e.yCoords.length-1]<=e.yCoords[0]+e.vMove&&e.menuIsOpen){e.pageContent.style.left=e.xCoords[e.xCoords.length-1]+"px";e.menuIcon.style.left=e.xCoords[e.xCoords.length-1]+10+"px";e.pageContent.addEventListener("touchend",e.closeMenu);e.lastTouchPlace=e.xCoords[e.xCoords.length-1]}else e.pageContent.addEventListener("touchend",e.resetTouch)};e.addActive=function(t){t.target.className+=" active";window.addEventListener("mouseout",e.removeActive,!0)};e.removeActive=function(t){var n=t.target;if(n!==undefined){n.className=n.className.replace(/(?:^|\s)active(?!\S)/g,"");return e}};e.findElements=function(){var t=e.navElements.length-1;for(;t>=0;t--){var n=e.navElements[t].childNodes[0];n.addEventListener("mouseover",e.addActive,!0)}};e.slideUnderline=function(t){e.currentItem.style.width=e.navElements[t].clientWidth+"px";e.currentItem.style.left=e.navElements[t].offsetLeft+"px"};e.scrollLinks=function(){var t=window.scrollY+e.navBar.clientHeight;for(var n=0,r=e.trueArray.length;n<r;n++)if(t>=e.trueArray[n]&&t<e.trueArray[n+1]){e.slideUnderline(n);return}};e.setupScrollNav=function(){e.currentItem.style.width=e.navElements[0].clientWidth+"px";e.currentItem.style.left=e.navElements[0].offsetLeft+"px";e.currentItem.style.display="block";for(var t=0,n=e.destinationIds.length;t<n;t++)e.destinationIds[t].id===e.sourceLinks[t].hash.substr(1)&&e.trueArray.push(e.destinationIds[t].offsetTop)};e.smallNavSize=function(){e.navBar.style.height=e.windowHeight+"px";e.everything.style.height=document.childNodes[1].scrollHeight+"px"};e.touchSmallNav=function(){e.pageContent.addEventListener("touchmove",e.handleTouchMove);for(var t=0,n=e.navElements.length;t<n;t++)e.navElements[t].childNodes[0].addEventListener("click",e.closeMenu,!0)};e.load=function(){e.trueArray=[];e.destinationIds=document.getElementsByClassName("destination");e.sourceLinks=e.navBar.getElementsByTagName("a");if(document.childNodes[1].clientWidth>=800){e.findElements();e.setupScrollNav()}else{e.smallNavSize();e.menuIsOpen=!1;e.xCoords=[];e.yCoords=[];e.touchSmallNav();e.lastTouchPlace=0;e.menuIcon.addEventListener("click",e.openMenu,!0)}window.addEventListener("scroll",e.scrollLinks,!0)}},navigation=new Navigation;window.addEventListener("load",navigation.load,!0);